// Language translations for Image Cube
const translations = {
    'en': {
        // Navigation
        'nav.home': 'Home',
        'nav.compress': 'Compress',
        'nav.convert': 'Convert',
        'nav.crop': 'Crop',

        // Hero Section
        'hero.badge': 'âœ¨ 100% Free Â· No Registration Â· Privacy Safe',
        'hero.title': 'Smart Image Processing',
        'hero.subtitle': 'All-in-One Solution',
        'hero.tagline': 'Lossless Compression Â· Format Conversion Â· Precise Cropping',
        'hero.description': 'All processing is done locally in your browser. Images never leave your device.',
        'hero.description2': 'Your privacy, we take it seriously.',
        'hero.cta': 'Get Started',

        // Feature Cards
        'feature.compress.title': 'Smart Compression',
        'feature.compress.desc': 'Advanced compression algorithms maintain visual quality while significantly reducing file size. Batch processing supported.',
        'feature.compress.btn': 'Start Compressing â†’',
        'feature.convert.title': 'Format Conversion',
        'feature.convert.desc': 'Convert between JPG, PNG, WebP, GIF and more. One-click conversion to optimal format.',
        'feature.convert.btn': 'Start Converting â†’',
        'feature.crop.title': 'Precise Cropping',
        'feature.crop.desc': 'Free crop or choose preset ratios. Supports passport photos and common sizes.',
        'feature.crop.btn': 'Start Cropping â†’',

        // Stats
        'stats.speed': 'Fast',
        'stats.speed.label': 'Local Processing',
        'stats.privacy': '100%',
        'stats.privacy.label': 'Privacy Protected',
        'stats.free': 'Forever',
        'stats.free.label': 'Free to Use',

        // Compress Tool
        'compress.title': 'ðŸ—œï¸ Image Compression',
        'compress.desc': 'Smart compression algorithm maintains visual quality while significantly reducing file size',
        'compress.quality': 'Compression Quality',
        'compress.quality.high': 'High Compression',
        'compress.quality.recommended': 'Recommended',
        'compress.quality.best': 'Best Quality',
        'compress.maxSize': 'Max Size Limit',
        'compress.noLimit': 'No Limit',

        // Convert Tool
        'convert.title': 'ðŸ”„ Format Conversion',
        'convert.desc': 'Convert between multiple image formats for different use cases',
        'convert.format': 'Target Format',
        'convert.quality': 'Output Quality',
        'convert.webp.desc': 'Smallest Size',
        'convert.jpeg.desc': 'Best Compatibility',
        'convert.png.desc': 'Supports Transparency',

        // Crop Tool
        'crop.title': 'âœ‚ï¸ Image Cropping',
        'crop.desc': 'Precise cropping with multiple preset ratios and free cropping',
        'crop.ratio': 'Aspect Ratio',
        'crop.ratio.free': 'Free',
        'crop.presets': 'Common Sizes',
        'crop.idPhotos': 'ID Photo Sizes (300DPI)',
        'crop.presets.1inch': '1-inch (25Ã—35mm)',
        'crop.presets.2inch': '2-inch (35Ã—49mm)',
        'crop.presets.passport': 'Passport (35Ã—45mm)',
        'crop.presets.visa': 'Visa (33Ã—48mm)',
        'crop.presets.usVisa': 'US Visa (51Ã—51mm)',
        'crop.format': 'Output Format',
        'crop.format.original': 'Keep Original',
        'crop.selectOther': 'Select Other Image',
        'crop.reset': 'Reset',
        'crop.apply': 'Crop & Download',

        // Upload Area
        'upload.text': 'Drag images here, or click to select files',
        'upload.hint.compress': 'Supports JPG, PNG, WebP, GIF formats',
        'upload.hint.convert': 'Supports JPG, PNG, WebP, GIF, BMP formats',
        'upload.hint.crop': 'Supports JPG, PNG, WebP formats',
        'upload.btn': 'Select Images',

        // Results
        'result.title': 'Processing Results',
        'result.reprocess': 'ðŸ”„ Reprocess',
        'result.downloadAll': 'Download All',
        'result.original': 'Original',
        'result.new': 'New',
        'result.download': 'Download',

        // Processing
        'processing.text': 'Processing...',

        // Footer
        'footer.copyright': 'Â© 2025 Image Cube - Professional Online Image Processing Tool',
        'footer.note': 'All processing is done locally in your browser. Your images are never uploaded.'
    },

    'zh-CN': {
        // Navigation
        'nav.home': 'é¦–é¡µ',
        'nav.compress': 'åŽ‹ç¼©',
        'nav.convert': 'è½¬æ¢',
        'nav.crop': 'è£åˆ‡',

        // Hero Section
        'hero.badge': 'âœ¨ 100% å…è´¹ Â· æ— éœ€æ³¨å†Œ Â· éšç§å®‰å…¨',
        'hero.title': 'æ™ºèƒ½å›¾ç‰‡å¤„ç†',
        'hero.subtitle': 'ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ',
        'hero.tagline': 'æ— æŸåŽ‹ç¼© Â· æ ¼å¼è½¬æ¢ Â· ç²¾å‡†è£åˆ‡',
        'hero.description': 'æ‰€æœ‰å¤„ç†å‡åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œå›¾ç‰‡ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨',
        'hero.description2': 'æ‚¨çš„éšç§ï¼Œæˆ‘ä»¬è®¤çœŸå¯¹å¾…',
        'hero.cta': 'ç«‹å³å¼€å§‹',

        // Feature Cards
        'feature.compress.title': 'æ™ºèƒ½åŽ‹ç¼©',
        'feature.compress.desc': 'å…ˆè¿›çš„åŽ‹ç¼©ç®—æ³•ï¼Œåœ¨ä¿æŒè§†è§‰è´¨é‡çš„åŒæ—¶å¤§å¹…å‡å°æ–‡ä»¶å¤§å°ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†',
        'feature.compress.btn': 'å¼€å§‹åŽ‹ç¼© â†’',
        'feature.convert.title': 'æ ¼å¼è½¬æ¢',
        'feature.convert.desc': 'æ”¯æŒ JPGã€PNGã€WebPã€GIF ç­‰å¤šç§æ ¼å¼äº’è½¬ï¼Œä¸€é”®è½¬æ¢ä¸ºæœ€ä¼˜æ ¼å¼',
        'feature.convert.btn': 'å¼€å§‹è½¬æ¢ â†’',
        'feature.crop.title': 'ç²¾å‡†è£åˆ‡',
        'feature.crop.desc': 'è‡ªç”±è£åˆ‡æˆ–é€‰æ‹©é¢„è®¾æ¯”ä¾‹ï¼Œæ”¯æŒ1å¯¸ã€2å¯¸è¯ä»¶ç…§ç­‰å¸¸ç”¨å°ºå¯¸',
        'feature.crop.btn': 'å¼€å§‹è£åˆ‡ â†’',

        // Stats
        'stats.speed': 'æžé€Ÿ',
        'stats.speed.label': 'æœ¬åœ°å¤„ç†',
        'stats.privacy': '100%',
        'stats.privacy.label': 'éšç§ä¿æŠ¤',
        'stats.free': 'æ°¸ä¹…',
        'stats.free.label': 'å…è´¹ä½¿ç”¨',

        // Compress Tool
        'compress.title': 'ðŸ—œï¸ å›¾ç‰‡åŽ‹ç¼©',
        'compress.desc': 'æ™ºèƒ½åŽ‹ç¼©ç®—æ³•ï¼Œåœ¨ä¿æŒè§†è§‰è´¨é‡çš„åŒæ—¶å¤§å¹…å‡å°æ–‡ä»¶å¤§å°',
        'compress.quality': 'åŽ‹ç¼©è´¨é‡',
        'compress.quality.high': 'é«˜åŽ‹ç¼©',
        'compress.quality.recommended': 'æŽ¨è',
        'compress.quality.best': 'é«˜è´¨é‡',
        'compress.maxSize': 'æœ€å¤§å°ºå¯¸é™åˆ¶',
        'compress.noLimit': 'æ— é™åˆ¶',

        // Convert Tool
        'convert.title': 'ðŸ”„ æ ¼å¼è½¬æ¢',
        'convert.desc': 'æ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼äº’è½¬ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚',
        'convert.format': 'ç›®æ ‡æ ¼å¼',
        'convert.quality': 'è¾“å‡ºè´¨é‡',
        'convert.webp.desc': 'ä½“ç§¯æœ€å°',
        'convert.jpeg.desc': 'å…¼å®¹æ€§å¥½',
        'convert.png.desc': 'æ”¯æŒé€æ˜Ž',

        // Crop Tool
        'crop.title': 'âœ‚ï¸ å›¾ç‰‡è£åˆ‡',
        'crop.desc': 'ç²¾å‡†è£åˆ‡ï¼Œæ”¯æŒå¤šç§é¢„è®¾æ¯”ä¾‹å’Œè‡ªç”±è£åˆ‡',
        'crop.ratio': 'è£åˆ‡æ¯”ä¾‹',
        'crop.ratio.free': 'è‡ªç”±',
        'crop.presets': 'å¸¸ç”¨å°ºå¯¸',
        'crop.idPhotos': 'è¯ä»¶ç…§å°ºå¯¸ (300DPI)',
        'crop.presets.1inch': '1å¯¸ (25Ã—35mm)',
        'crop.presets.2inch': '2å¯¸ (35Ã—49mm)',
        'crop.presets.passport': 'æŠ¤ç…§ (35Ã—45mm)',
        'crop.presets.visa': 'ç­¾è¯ (33Ã—48mm)',
        'crop.presets.usVisa': 'ç¾Žå›½ç­¾è¯ (51Ã—51mm)',
        'crop.format': 'è¾“å‡ºæ ¼å¼',
        'crop.format.original': 'ä¿æŒåŽŸæ ¼å¼',
        'crop.selectOther': 'é€‰æ‹©å…¶ä»–å›¾ç‰‡',
        'crop.reset': 'é‡ç½®',
        'crop.apply': 'è£åˆ‡å¹¶ä¸‹è½½',

        // Upload Area
        'upload.text': 'æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶',
        'upload.hint.compress': 'æ”¯æŒ JPGã€PNGã€WebPã€GIF æ ¼å¼',
        'upload.hint.convert': 'æ”¯æŒ JPGã€PNGã€WebPã€GIFã€BMP æ ¼å¼',
        'upload.hint.crop': 'æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼',
        'upload.btn': 'é€‰æ‹©å›¾ç‰‡',

        // Results
        'result.title': 'å¤„ç†ç»“æžœ',
        'result.reprocess': 'ðŸ”„ é‡æ–°å¤„ç†',
        'result.downloadAll': 'ä¸‹è½½å…¨éƒ¨',
        'result.original': 'åŽŸå§‹',
        'result.new': 'æ–°',
        'result.download': 'ä¸‹è½½',

        // Processing
        'processing.text': 'æ­£åœ¨å¤„ç†...',

        // Footer
        'footer.copyright': 'Â© 2025 å›¾ç‰‡é­”æ–¹ - ä¸“ä¸šçš„åœ¨çº¿å›¾ç‰‡å¤„ç†å·¥å…·',
        'footer.note': 'æ‰€æœ‰å¤„ç†å‡åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ æ‚¨çš„å›¾ç‰‡'
    },

    'zh-TW': {
        // Navigation
        'nav.home': 'é¦–é ',
        'nav.compress': 'å£“ç¸®',
        'nav.convert': 'è½‰æ›',
        'nav.crop': 'è£åˆ‡',

        // Hero Section
        'hero.badge': 'âœ¨ 100% å…è²» Â· ç„¡éœ€è¨»å†Š Â· éš±ç§å®‰å…¨',
        'hero.title': 'æ™ºèƒ½åœ–ç‰‡è™•ç†',
        'hero.subtitle': 'ä¸€ç«™å¼è§£æ±ºæ–¹æ¡ˆ',
        'hero.tagline': 'ç„¡æå£“ç¸® Â· æ ¼å¼è½‰æ› Â· ç²¾æº–è£åˆ‡',
        'hero.description': 'æ‰€æœ‰è™•ç†å‡åœ¨ç€è¦½å™¨æœ¬åœ°å®Œæˆï¼Œåœ–ç‰‡ä¸æœƒä¸Šå‚³åˆ°ä»»ä½•ä¼ºæœå™¨',
        'hero.description2': 'æ‚¨çš„éš±ç§ï¼Œæˆ‘å€‘èªçœŸå°å¾…',
        'hero.cta': 'ç«‹å³é–‹å§‹',

        // Feature Cards
        'feature.compress.title': 'æ™ºèƒ½å£“ç¸®',
        'feature.compress.desc': 'å…ˆé€²çš„å£“ç¸®æ¼”ç®—æ³•ï¼Œåœ¨ä¿æŒè¦–è¦ºå“è³ªçš„åŒæ™‚å¤§å¹…æ¸›å°æª”æ¡ˆå¤§å°ï¼Œæ”¯æ´æ‰¹é‡è™•ç†',
        'feature.compress.btn': 'é–‹å§‹å£“ç¸® â†’',
        'feature.convert.title': 'æ ¼å¼è½‰æ›',
        'feature.convert.desc': 'æ”¯æ´ JPGã€PNGã€WebPã€GIF ç­‰å¤šç¨®æ ¼å¼äº’è½‰ï¼Œä¸€éµè½‰æ›ç‚ºæœ€å„ªæ ¼å¼',
        'feature.convert.btn': 'é–‹å§‹è½‰æ› â†’',
        'feature.crop.title': 'ç²¾æº–è£åˆ‡',
        'feature.crop.desc': 'è‡ªç”±è£åˆ‡æˆ–é¸æ“‡é è¨­æ¯”ä¾‹ï¼Œæ”¯æ´1å‹ã€2å‹è­‰ä»¶ç…§ç­‰å¸¸ç”¨å°ºå¯¸',
        'feature.crop.btn': 'é–‹å§‹è£åˆ‡ â†’',

        // Stats
        'stats.speed': 'æ¥µé€Ÿ',
        'stats.speed.label': 'æœ¬åœ°è™•ç†',
        'stats.privacy': '100%',
        'stats.privacy.label': 'éš±ç§ä¿è­·',
        'stats.free': 'æ°¸ä¹…',
        'stats.free.label': 'å…è²»ä½¿ç”¨',

        // Compress Tool
        'compress.title': 'ðŸ—œï¸ åœ–ç‰‡å£“ç¸®',
        'compress.desc': 'æ™ºèƒ½å£“ç¸®æ¼”ç®—æ³•ï¼Œåœ¨ä¿æŒè¦–è¦ºå“è³ªçš„åŒæ™‚å¤§å¹…æ¸›å°æª”æ¡ˆå¤§å°',
        'compress.quality': 'å£“ç¸®å“è³ª',
        'compress.quality.high': 'é«˜å£“ç¸®',
        'compress.quality.recommended': 'æŽ¨è–¦',
        'compress.quality.best': 'é«˜å“è³ª',
        'compress.maxSize': 'æœ€å¤§å°ºå¯¸é™åˆ¶',
        'compress.noLimit': 'ç„¡é™åˆ¶',

        // Convert Tool
        'convert.title': 'ðŸ”„ æ ¼å¼è½‰æ›',
        'convert.desc': 'æ”¯æ´å¤šç¨®åœ–ç‰‡æ ¼å¼äº’è½‰ï¼Œæ»¿è¶³ä¸åŒå ´æ™¯éœ€æ±‚',
        'convert.format': 'ç›®æ¨™æ ¼å¼',
        'convert.quality': 'è¼¸å‡ºå“è³ª',
        'convert.webp.desc': 'é«”ç©æœ€å°',
        'convert.jpeg.desc': 'ç›¸å®¹æ€§å¥½',
        'convert.png.desc': 'æ”¯æ´é€æ˜Ž',

        // Crop Tool
        'crop.title': 'âœ‚ï¸ åœ–ç‰‡è£åˆ‡',
        'crop.desc': 'ç²¾æº–è£åˆ‡ï¼Œæ”¯æ´å¤šç¨®é è¨­æ¯”ä¾‹å’Œè‡ªç”±è£åˆ‡',
        'crop.ratio': 'è£åˆ‡æ¯”ä¾‹',
        'crop.ratio.free': 'è‡ªç”±',
        'crop.presets': 'å¸¸ç”¨å°ºå¯¸',
        'crop.idPhotos': 'è­‰ä»¶ç…§å°ºå¯¸ (300DPI)',
        'crop.presets.1inch': '1å‹ (25Ã—35mm)',
        'crop.presets.2inch': '2å‹ (35Ã—49mm)',
        'crop.presets.passport': 'è­·ç…§ (35Ã—45mm)',
        'crop.presets.visa': 'ç°½è­‰ (33Ã—48mm)',
        'crop.presets.usVisa': 'ç¾Žåœ‹ç°½è­‰ (51Ã—51mm)',
        'crop.format': 'è¼¸å‡ºæ ¼å¼',
        'crop.format.original': 'ä¿æŒåŽŸæ ¼å¼',
        'crop.selectOther': 'é¸æ“‡å…¶ä»–åœ–ç‰‡',
        'crop.reset': 'é‡ç½®',
        'crop.apply': 'è£åˆ‡ä¸¦ä¸‹è¼‰',

        // Upload Area
        'upload.text': 'æ‹–æ›³åœ–ç‰‡åˆ°é€™è£¡ï¼Œæˆ–é»žæ“Šé¸æ“‡æª”æ¡ˆ',
        'upload.hint.compress': 'æ”¯æ´ JPGã€PNGã€WebPã€GIF æ ¼å¼',
        'upload.hint.convert': 'æ”¯æ´ JPGã€PNGã€WebPã€GIFã€BMP æ ¼å¼',
        'upload.hint.crop': 'æ”¯æ´ JPGã€PNGã€WebP æ ¼å¼',
        'upload.btn': 'é¸æ“‡åœ–ç‰‡',

        // Results
        'result.title': 'è™•ç†çµæžœ',
        'result.reprocess': 'ðŸ”„ é‡æ–°è™•ç†',
        'result.downloadAll': 'ä¸‹è¼‰å…¨éƒ¨',
        'result.original': 'åŽŸå§‹',
        'result.new': 'æ–°',
        'result.download': 'ä¸‹è¼‰',

        // Processing
        'processing.text': 'æ­£åœ¨è™•ç†...',

        // Footer
        'footer.copyright': 'Â© 2025 åœ–ç‰‡é­”æ–¹ - å°ˆæ¥­çš„ç·šä¸Šåœ–ç‰‡è™•ç†å·¥å…·',
        'footer.note': 'æ‰€æœ‰è™•ç†å‡åœ¨ç€è¦½å™¨æœ¬åœ°å®Œæˆï¼Œä¸æœƒä¸Šå‚³æ‚¨çš„åœ–ç‰‡'
    }
};

// Language detection and management
class I18n {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.listeners = [];
    }

    detectLanguage() {
        // Check localStorage first
        const saved = localStorage.getItem('imagecube-lang');
        if (saved && translations[saved]) {
            return saved;
        }

        // Detect from browser
        const browserLang = navigator.language || navigator.userLanguage;

        if (browserLang.startsWith('zh')) {
            // Distinguish between Simplified and Traditional Chinese
            if (browserLang === 'zh-TW' || browserLang === 'zh-HK' || browserLang === 'zh-Hant') {
                return 'zh-TW';
            }
            return 'zh-CN';
        }

        // Default to English
        return 'en';
    }

    setLanguage(lang) {
        if (translations[lang]) {
            this.currentLang = lang;
            localStorage.setItem('imagecube-lang', lang);
            document.documentElement.lang = lang;
            this.updatePage();
            this.notifyListeners();
        }
    }

    t(key) {
        return translations[this.currentLang][key] || translations['en'][key] || key;
    }

    updatePage() {
        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            el.textContent = this.t(key);
        });

        // Update all elements with data-i18n-placeholder
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            el.placeholder = this.t(key);
        });

        // Update document title based on language
        const titles = {
            'en': 'Image Cube - Free Online Image Processing Tool',
            'zh-CN': 'å›¾ç‰‡é­”æ–¹ - å…è´¹åœ¨çº¿å›¾ç‰‡å¤„ç†å·¥å…·',
            'zh-TW': 'åœ–ç‰‡é­”æ–¹ - å…è²»ç·šä¸Šåœ–ç‰‡è™•ç†å·¥å…·'
        };
        document.title = titles[this.currentLang];

        // Update language switcher display
        this.updateLanguageSwitcher();
    }

    updateLanguageSwitcher() {
        const currentDisplay = document.getElementById('current-lang');
        if (currentDisplay) {
            const langNames = {
                'en': 'English',
                'zh-CN': 'ç®€ä½“ä¸­æ–‡',
                'zh-TW': 'ç¹é«”ä¸­æ–‡'
            };
            currentDisplay.textContent = langNames[this.currentLang];
        }
    }

    onLanguageChange(callback) {
        this.listeners.push(callback);
    }

    notifyListeners() {
        this.listeners.forEach(cb => cb(this.currentLang));
    }
}

// Export
export { translations, I18n };
